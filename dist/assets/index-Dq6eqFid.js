var g=Object.defineProperty;var f=(o,t,i)=>t in o?g(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i;var s=(o,t,i)=>f(o,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))h(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(e){if(e.ep)return;e.ep=!0;const a=i(e);fetch(e.href,a)}})();class c{constructor(t,i,h){s(this,"position");s(this,"width",34);s(this,"height",24);s(this,"velocity",0);s(this,"gravity");s(this,"flapStrength",-5);s(this,"frameIndex",0);s(this,"frameCount",0);s(this,"frameDelay",5);s(this,"sprites",[]);s(this,"spriteLoaded",!1);this.position={x:t,y:i},this.gravity=h,this.loadSprites()}loadSprites(){const t=["yellow","blue","red"],i=t[Math.floor(Math.random()*t.length)];for(let h=0;h<3;h++){const e=new Image;e.src=`data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="34" height="24" viewBox="0 0 34 24"><g fill="none"><path fill="${i==="yellow"?"%23FFDB15":i==="blue"?"%2357D4FA":"%23FE2C54"}" d="M12 0h14a8 8 0 0 1 8 8v8a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8v-4a4 4 0 0 1 4-4h2a6 6 0 0 0 6-6V0z"/><circle cx="26" cy="10" r="2" fill="white"/><circle cx="26" cy="10" r="1" fill="black"/><path fill="orange" d="M8 12h6l-3 6z"/><path fill="white" d="M0 8h8v4H0z"/></g></svg>`,this.sprites.push(e),h===0&&(e.onload=()=>{this.spriteLoaded=!0})}}flap(){this.velocity=this.flapStrength}update(){this.velocity+=this.gravity,this.position.y+=this.velocity,this.frameCount++,this.frameCount>=this.frameDelay&&(this.frameCount=0,this.frameIndex=(this.frameIndex+1)%this.sprites.length)}draw(t){const i=Math.min(Math.PI/4,Math.max(-Math.PI/4,this.velocity*.1));t.save(),t.translate(this.position.x+this.width/2,this.position.y+this.height/2),t.rotate(i),this.spriteLoaded?t.drawImage(this.sprites[this.frameIndex],-this.width/2,-this.height/2,this.width,this.height):(t.fillStyle="yellow",t.fillRect(-this.width/2,-this.height/2,this.width,this.height)),t.restore()}}class p{constructor(t,i,h,e){s(this,"position");s(this,"width",52);s(this,"height");s(this,"speed",2);s(this,"passed",!1);s(this,"type");this.position={x:t,y:i},this.height=h,this.type=e}update(){this.position.x-=this.speed}draw(t){t.fillStyle="#74BF2E",t.fillRect(this.position.x,this.position.y,this.width,this.height),t.strokeStyle="#2C9C0E",t.lineWidth=2,t.strokeRect(this.position.x,this.position.y,this.width,this.height);const i=24,h=60,e=this.position.x-(h-this.width)/2;let a;this.type==="top"?a=this.position.y+this.height-i:a=this.position.y,t.fillStyle="#74BF2E",t.fillRect(e,a,h,i),t.strokeStyle="#2C9C0E",t.lineWidth=2,t.strokeRect(e,a,h,i)}}class u{constructor(t,i){s(this,"width");s(this,"height");s(this,"groundHeight",80);s(this,"cloudPositions",[]);s(this,"buildingPositions",[]);this.width=t,this.height=i;for(let e=0;e<5;e++)this.cloudPositions.push({x:Math.random()*this.width,y:Math.random()*(this.height/2-30),size:20+Math.random()*30});let h=0;for(;h<this.width;){const e=20+Math.random()*40,a=40+Math.random()*60;this.buildingPositions.push({x:h,width:e,height:a}),h+=e+5}}draw(t){t.fillStyle="#71C5CF",t.fillRect(0,0,this.width,this.height),t.fillStyle="rgba(255, 255, 255, 0.8)";for(const i of this.cloudPositions)t.beginPath(),t.arc(i.x,i.y,i.size,0,Math.PI*2),t.arc(i.x+i.size*.5,i.y-i.size*.3,i.size*.7,0,Math.PI*2),t.arc(i.x+i.size,i.y,i.size*.8,0,Math.PI*2),t.fill();t.fillStyle="#4D8A9E";for(const i of this.buildingPositions){t.fillRect(i.x,this.height-this.groundHeight-i.height,i.width,i.height),t.fillStyle="#FFDB15";const h=5,e=8,a=Math.floor(i.height/e)-1,r=Math.floor(i.width/e)-1;for(let l=0;l<a;l++)for(let d=0;d<r;d++)Math.random()>.5&&t.fillRect(i.x+e+d*e,this.height-this.groundHeight-i.height+e+l*e,h,h);t.fillStyle="#4D8A9E"}t.fillStyle="#DED895",t.fillRect(0,this.height-this.groundHeight,this.width,this.groundHeight),t.fillStyle="#8DD853",t.fillRect(0,this.height-this.groundHeight,this.width,15),t.fillStyle="#C9B268";for(let i=0;i<this.width;i+=30)t.fillRect(i,this.height-this.groundHeight+20,15,5),t.fillRect(i+15,this.height-this.groundHeight+40,15,5),t.fillRect(i,this.height-this.groundHeight+60,15,5)}}var n=(o=>(o[o.Start=0]="Start",o[o.Playing=1]="Playing",o[o.GameOver=2]="GameOver",o))(n||{});class w{constructor(t){s(this,"canvas");s(this,"ctx");s(this,"bird");s(this,"pipes",[]);s(this,"background");s(this,"score",0);s(this,"frameCount",0);s(this,"lastPipeFrame",0);s(this,"gameState",n.Start);s(this,"scoreElement");s(this,"gravity",.25);s(this,"pipeGap",120);s(this,"pipeSpawnInterval",90);this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.bird=new c(50,this.canvas.height/2-12,this.gravity),this.background=new u(this.canvas.width,this.canvas.height),this.scoreElement=document.getElementById("score"),window.addEventListener("keydown",i=>{i.code==="Space"&&this.handleInput()}),this.canvas.addEventListener("click",()=>{this.handleInput()}),this.canvas.addEventListener("touchstart",i=>{i.preventDefault(),this.handleInput()})}handleInput(){switch(this.gameState){case n.Start:this.gameState=n.Playing;break;case n.Playing:this.bird.flap();break;case n.GameOver:this.reset(),this.gameState=n.Start;break}}reset(){this.bird=new c(50,this.canvas.height/2-12,this.gravity),this.pipes=[],this.score=0,this.frameCount=0,this.lastPipeFrame=0,this.updateScore()}updateScore(){this.scoreElement.textContent=`Score: ${this.score}`}spawnPipe(){const i=this.canvas.height-this.pipeGap-50,h=Math.floor(Math.random()*(i-50+1)+50);this.pipes.push(new p(this.canvas.width,0,h,"top")),this.pipes.push(new p(this.canvas.width,h+this.pipeGap,this.canvas.height-h-this.pipeGap,"bottom"))}update(){if(this.gameState===n.Playing){this.frameCount++,this.frameCount-this.lastPipeFrame>this.pipeSpawnInterval&&(this.spawnPipe(),this.lastPipeFrame=this.frameCount),this.bird.update();for(let t=0;t<this.pipes.length;t++)this.pipes[t].update(),this.pipes[t].position.x+this.pipes[t].width<this.bird.position.x&&!this.pipes[t].passed&&this.pipes[t].type==="top"&&(this.pipes[t].passed=!0,this.score++,this.updateScore()),this.checkCollision(this.bird,this.pipes[t])&&(this.gameState=n.GameOver);this.pipes=this.pipes.filter(t=>t.position.x>-t.width),(this.bird.position.y<=0||this.bird.position.y+this.bird.height>=this.canvas.height)&&(this.gameState=n.GameOver)}}checkCollision(t,i){return t.position.x<i.position.x+i.width&&t.position.x+t.width>i.position.x&&t.position.y<i.position.y+i.height&&t.position.y+t.height>i.position.y}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.background.draw(this.ctx);for(const t of this.pipes)t.draw(this.ctx);this.bird.draw(this.ctx),this.gameState===n.Start?(this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.font="20px Arial",this.ctx.textAlign="center",this.ctx.fillText("Click to Start",this.canvas.width/2,this.canvas.height/2)):this.gameState===n.GameOver&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="white",this.ctx.font="20px Arial",this.ctx.textAlign="center",this.ctx.fillText("Game Over",this.canvas.width/2,this.canvas.height/2-20),this.ctx.fillText(`Score: ${this.score}`,this.canvas.width/2,this.canvas.height/2+20),this.ctx.fillText("Click to Restart",this.canvas.width/2,this.canvas.height/2+60))}gameLoop(){this.update(),this.render(),requestAnimationFrame(()=>this.gameLoop())}start(){this.updateScore(),this.gameLoop()}}document.querySelector("#app").innerHTML=`
  <div>
    <h1 class="game-title">Flappy Bird</h1>
    <canvas id="game-canvas" width="320" height="480"></canvas>
    <div class="score-display">Score: <span id="score">0</span></div>
    <div class="instructions">
      Press SPACE to flap<br>
      Click or tap to start
    </div>
  </div>
`;const m=new w("game-canvas");m.start();
